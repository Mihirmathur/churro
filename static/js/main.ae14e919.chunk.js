(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),s=a.n(c),o=(a(38),a(127)),l=a(124),i=a(32),u=a(126),m=a(5),d=a(6),h=a(4),p=a(26),f=a.n(p);f.a.initializeApp({apiKey:"AIzaSyAZnwch_QKuS6OPefMuAoUtEQd_ppiaa50",authDomain:"churro-126ca.firebaseapp.com",databaseURL:"https://churro-126ca.firebaseio.com",projectId:"churro-126ca",storageBucket:"",messagingSenderId:"285905994423"});var g=f.a,E=function(){function e(){Object(m.a)(this,e),this.errors=[],this.timeoutFn=null}return Object(d.a)(e,[{key:"waitAndClear",value:function(){var e=this;null!==this.timeoutFn&&clearTimeout(this.timeoutFn),this.timeoutFn=setTimeout(function(){e.errors=[],e.timeoutFn=null},5e3)}},{key:"clear",value:function(){this.errors=[]}},{key:"addError",value:function(e){this.errors.push(e),this.waitAndClear()}},{key:"hasErrors",get:function(){return 0<this.errors.length}}]),e}();Object(h.i)(E,{errors:h.n,hasErrors:h.f});var v=new E,b=function(){function e(t){var a=this;Object(m.a)(this,e),this.group=null,this.isFetching=!0;var n=t.firestore();n.settings({timestampsInSnapshots:!0}),this.db=n.collection("groups"),Object(h.e)(function(){return a.updateGroup()},{delay:300})}return Object(d.a)(e,[{key:"get",value:function(e){var t=this;if(null===this.group||this.group.id!==e)return this.isFetching=!0,this.db.doc(e).get().then(function(a){if(a.exists)return t.group=a.data(),t.group.id=e,t.isFetching=!1,t.group;console.log("No group with id of "+e)}).catch(function(e){t.isFetching=!1,v.addError(e)})}},{key:"getUsersGroups",value:function(e){var t=this;return console.log(e),this.db.where("user_emails","array-contains",e).get().then(function(t){if(!t.empty){var a=[];return t.forEach(function(e){var t=e.data(),n={id:e.id,name:t.name};a.push(n)}),a}console.log("User has no groups with email "+e)}).catch(function(e){t.isFetching=!1,v.addError(e)})}},{key:"add",value:function(e,t,a){var n=t.map(function(e){return e.email}),r={name:e,users:t,tasks:a,user_emails:n};return this.db.add(r).then(function(e){return r.id=e.id,console.log(r),r}).catch(function(e){v.addError(e)})}},{key:"updateGroup",value:function(){null!==this.group&&this.db.doc(this.group.id).set(this.group).then(function(e){console.log("Successfully updated group")}).catch(function(e){v.addError(e)})}}]),e}();Object(h.i)(b,{group:h.n,isFetching:h.n,get:h.d,getUsersGroups:h.d,add:h.d});var k=new b(g),y="churro-user",N=function(){function e(){Object(m.a)(this,e),this.currentUser="",this.usersGroups=[],this.fetching=!1,localStorage.getItem(y)&&(this.currentUser=localStorage.getItem(y))}return Object(d.a)(e,[{key:"logout",value:function(){this.currentUser="",this.usersGroups=[],localStorage.removeItem(y)}},{key:"setCurrentUser",value:function(e){this.currentUser=e,console.log("Set current user to "+this.currentUser),localStorage.setItem(y,e)}},{key:"fetchCurrentUsersGroups",value:function(){var e=this;this.isLoggedIn&&(this.fetching=!0,k.getUsersGroups(this.currentUser).then(function(t){console.log(t),e.usersGroups=t.map(function(e){return{id:e.id,name:e.name}}),e.fetching=!1}).catch(function(t){console.log(t),e.fetching=!1}))}},{key:"isLoggedIn",get:function(){return""!==this.currentUser}}]),e}();Object(h.i)(N,{currentUser:h.n,usersGroups:h.n,users:h.n,fetching:h.n,isLoggedIn:h.f,setCurrentUser:h.d,getCurrentUsersGroups:h.d});var O=new N,j=function(e){var t=e.component,a=Object(i.a)(e,["component"]);return r.a.createElement(l.a,Object.assign({},a,{render:function(e){return O.isLoggedIn?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/"})}}))},w=a(11),C=a(9),S=a(10),U=a(59),G=(a(28),function(e){return r.a.createElement("button",Object.assign({className:"button button--call-to-action"},e),e.children)}),x=function(e){var t="";return e&&e.stylename&&(t=e.stylename),r.a.createElement("button",Object.assign({className:"button ".concat(t)},e),e.children)},I=(a(55),function(e){return r.a.createElement("input",Object.assign({className:"input"},e),e.children)}),A=(a(21),a(25),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(w.a)(this,Object(C.a)(t).call(this,e))).formFlow=function(e,t){return function(n){var r={step:t};"group-name"==e&&(r.groupName=document.getElementById("group-name-input").value),a.setState(r)}},a.addRoommate=function(){var e=a.state.roommates,t={name:document.getElementById("roommate-name-input").value,email:document.getElementById("roommate-email-input").value};e.push(t),document.getElementById("roommate-name-input").value="",document.getElementById("roommate-email-input").value="",a.setState({roommates:e})},a.state={step:"group-name",groupName:"",roommates:[]},a}return Object(S.a)(t,e),Object(d.a)(t,[{key:"getFormElement",value:function(){var e,t=this.state.roommates;return"group-name"==this.state.step?e=r.a.createElement("div",{className:"form group-name"},r.a.createElement(I,{id:"group-name-input",placeholder:"Group Name"}),r.a.createElement(x,{stylename:"button--next",onClick:this.formFlow("group-name","roommates")})):"roommates"==this.state.step&&(e=r.a.createElement("div",{className:"form roommates"},r.a.createElement("h4",{className:"form-title"},this.state.groupName),r.a.createElement("p",null,"Who are the roommates in this group?"),t.map(function(e,t){return r.a.createElement("div",{key:t},e.name)}),r.a.createElement(I,{id:"roommate-name-input",placeholder:"Roommate Name"}),r.a.createElement(I,{id:"roommate-email-input",placeholder:"Roommate Email"}),r.a.createElement("div",null,r.a.createElement(x,{stylename:"button--back",onClick:this.formFlow("roommates","group-name")}),r.a.createElement(x,{stylename:"button--call-to-action",onClick:this.addRoommate}," ","Add Roommate +"),r.a.createElement(U.a,{to:"/addchore"},r.a.createElement(x,null,"Added All Roommates >"))))),e}},{key:"render",value:function(){var e=this.getFormElement();return r.a.createElement("div",{className:"Main"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"NewGroup"},e)))}}]),t}(n.Component)),F=function(e){function t(){return Object(m.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(d.a)(t,[{key:"transitionOut",value:function(){var e=document.getElementById("landing");e.style.left="-10%",e.style.opacity=0}},{key:"render",value:function(){return r.a.createElement("div",{className:"Main"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"landing"},r.a.createElement("h2",{className:"welcome-header"},"Welcome to Churro!"),r.a.createElement("h4",{className:"welcome-subheader"},"The New Way to Manage Chores"),r.a.createElement("div",{className:"button-container"},r.a.createElement(U.a,{to:"/new"},r.a.createElement(G,{onClick:this.transitionOut},"START A NEW GROUP")),r.a.createElement(U.a,{to:"/login"},r.a.createElement(x,null,"LOGIN"))))))}}]),t}(n.Component),T=a(15),R=(a(60),new(function(){function e(t){Object(m.a)(this,e);var a=t.firestore();a.settings({timestampsInSnapshots:!0}),this.db=a.collection("groups"),this.group=null}return Object(d.a)(e,[{key:"fetchGroup",value:function(e){var t=this;return this.db.doc(e).get().then(function(a){if(a.exists)return t.group=a.data(),t.group.id=e,console.log(t.group),t.group;console.log("No group with id of "+e)})}},{key:"getUsersGroups",value:function(e){return this.db.where("users","array-contains",e).get().then(function(t){if(t.exists)return t.data();console.log("User has no groups with email "+e)})}},{key:"addGroup",value:function(e){return this.db.add(e).then(function(t){return e.id=t.id,console.log(e),e})}}]),e}())(g),a(62),function(e){var t=e.name,a=e.color,n=t.split(" "),c=n[0][0]+n[1][0];return r.a.createElement("p",{style:{backgroundColor:a},className:"circle-initials"},c)}),M=Object(T.a)(function(e){var t=e.tasks,a=e.title;if(0==t.length)return null;var n=t.map(function(e){var t=k.group.users[e.currentQueue[0]];return r.a.createElement("li",{key:e.id,className:"task-card-item"},r.a.createElement("span",null,r.a.createElement("span",{className:"task-card-check"},r.a.createElement("i",{className:"far fa-check-circle"})),e.name,r.a.createElement("span",{className:"task-card-right"},r.a.createElement(R,{name:t.name,color:t.color}),r.a.createElement(U.a,{className:"task-card-focus-button",to:"/groups/"+k.group.id+"/tasks/"+e.id},r.a.createElement("i",{className:"fas fa-angle-right"})))))});return r.a.createElement("section",{className:"task-card"},r.a.createElement("header",{className:"task-card-title"},a),r.a.createElement("ul",{className:"task-card-list"},n))}),B=(a(64),function(e){var t=e.task,a=e.closeURL,n=t.currentQueue.map(function(e){var t=k.group.users[e];return r.a.createElement("li",{key:e,className:"focused-task-queue-item"},r.a.createElement("span",null,r.a.createElement(R,{name:t.name,color:t.color,style:{display:"inline"}}),t.name))});return r.a.createElement("section",{className:"focused-task-card"},r.a.createElement("div",{className:"focused-task-content"},r.a.createElement("div",{className:"focused-task-close"},r.a.createElement(U.a,{className:"focused-task-close-button",to:a},"x")),r.a.createElement("header",{className:"focused-task-card-name"},r.a.createElement("h2",null,t.name)),r.a.createElement("p",{className:"focused-task-card-desc"},t.description),r.a.createElement("ul",{className:"focused-task-queue"},n),r.a.createElement(G,{onClick:function(){t.currentQueue.push(t.currentQueue.shift())}},"COMPLETE TASK")))}),L=a(125),Q=a(30),D=(a(81),function(e){e.team;return r.a.createElement(Q.push,null,r.a.createElement(L.a,{exact:!0,className:"link",to:"/"},"HOME"),r.a.createElement(L.a,{exact:!0,className:"link",to:"/tasks"},"TASKS"),r.a.createElement(L.a,{exact:!0,className:"link",to:"/addchore"},"ADD TASK"),r.a.createElement(L.a,{exact:!0,className:"link",to:"/tasks"},"INFO"),r.a.createElement(L.a,{exact:!0,className:"link",to:"/",onClick:function(){O.logout()}},"LOGOUT"))}),W=(a(83),function(e){return r.a.createElement("button",{className:"chore-button"},"+")}),K=(a(85),Object(T.a)(function(e){function t(){return Object(m.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.group;k.get(e)}},{key:"render",value:function(){var e,t=this;if(k.isFetching)return r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement("h1",null,"Loading!"),r.a.createElement(U.a,{to:"/addchore"},r.a.createElement(W,null)));var a=k.group.tasks.reduce(function(a,n){return t.props.match.params.id&&n.id===t.props.match.params.id&&(e=n),n.currentQueue[0]===O.currentUser?a[n.schedule].push(n):1<n.currentQueue.length&&n.currentQueue[1]===O.currentUser&&a["Coming up"].push(n),a},{Daily:[],Weekly:[],Biweekly:[],Monthly:[],"As needed":[],"Coming up":[]}),n=Object.entries(a).map(function(e){return r.a.createElement(M,{key:e[0],title:e[0],tasks:e[1]})}),c=this.props.match.params.group;return r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement("div",{className:"MyTasks"},r.a.createElement("h1",{className:"center"},k.group.name),r.a.createElement("h2",{className:"center"},"My Tasks"),r.a.createElement("section",{className:"my-tasks-columns"},r.a.createElement("div",{className:"my-tasks-cards"},n),e&&r.a.createElement(B,{task:e,closeURL:"/groups/"+c+"/tasks"}))),r.a.createElement(U.a,{to:"/addchore"},r.a.createElement(W,null)))}}]),t}(n.Component))),q=a(18),z=Object(T.a)(function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(w.a)(this,Object(C.a)(t).call(this,e))).emailRE=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,a.state={email:"",styles:{}},a.handleChange=a.handleChange.bind(Object(q.a)(Object(q.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(q.a)(Object(q.a)(a))),a}return Object(S.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){this.setState({email:e.target.value,styles:{}})}},{key:"handleSubmit",value:function(){this.state.email.trim()&&this.emailRE.test(this.state.email)?(O.setCurrentUser(this.state.email),this.props.history.push("/groups")):this.setState({email:this.state.email,styles:{borderBottom:"3px solid #E00747"}})}},{key:"render",value:function(){return r.a.createElement("div",{className:"Main"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"NewGroup"},r.a.createElement("div",{className:"form group-name"},r.a.createElement(I,{id:"group-name-input",style:this.state.styles,placeholder:"Email",value:this.state.value,onChange:this.handleChange}),r.a.createElement(x,{stylename:"button--next",onClick:this.handleSubmit})))))}}]),t}(n.Component)),_=(a(87),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(w.a)(this,Object(C.a)(t).call(this,e))).addChore=function(){a.setState({redirect:!0}),console.log(a.state.redirect)},a.renderRedirect=function(){if(a.state.redirect)return r.a.createElement(u.a,{to:"/tasks"})},a.state={redirect:!1},a}return Object(S.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderRedirect(),r.a.createElement(D,null),r.a.createElement("div",{className:"MyTasks center"},r.a.createElement("h1",null,"The CSS Slayers"),r.a.createElement("h2",null,"Add Task"),"Name: ",r.a.createElement(I,{id:"task-name-id",placeholder:"Task Name"}),r.a.createElement("br",null),"Description:"," ",r.a.createElement("textarea",{className:"text-input",id:"task-desc-id",placeholder:"Task Description"}),r.a.createElement("br",null),"Frequency:"," ",r.a.createElement("select",{id:"task-freq-id",defaultValue:"daily"},r.a.createElement("option",{value:"daily"},"Daily"),r.a.createElement("option",{value:"weekly"},"Weekly"),r.a.createElement("option",{value:"biweekly"},"Biweekly")),r.a.createElement("br",null),r.a.createElement(x,{stylename:"",onClick:this.addChore},"Add Chore")))}}]),t}(n.Component)),P=a(31),Z=a.n(P),J=Object(T.a)(function(e){function t(e){var a;return Object(m.a)(this,t),a=Object(w.a)(this,Object(C.a)(t).call(this,e)),O.fetchCurrentUsersGroups(),a}return Object(S.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=r.a.createElement(Z.a,{name:"folding-cube"});if(!O.fetching){var t=O.usersGroups.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(U.a,{to:"/groups/"+e.id+"/tasks"},e.name))});e=r.a.createElement("ul",null,t)}return r.a.createElement("div",{className:"Main"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"NewGroup"},r.a.createElement("div",{className:"form group-name"},e))))}}]),t}(n.Component)),$=(a(121),function(){return r.a.createElement(o.a,{basename:"/churro"},r.a.createElement("main",null,r.a.createElement(l.a,{path:"/",exact:!0,component:F}),r.a.createElement(l.a,{path:"/login",exact:!0,component:z}),r.a.createElement(l.a,{path:"/new",exact:!0,component:A}),r.a.createElement(j,{path:"/groups",exact:!0,component:J}),r.a.createElement(j,{path:"/groups/:group/tasks",exact:!0,component:K}),r.a.createElement(j,{path:"/groups/:group/tasks/:id",exact:!0,component:K}),r.a.createElement(j,{path:"/addchore",exact:!0,component:_})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},21:function(e,t,a){},25:function(e,t,a){},28:function(e,t,a){},33:function(e,t,a){e.exports=a(123)},38:function(e,t,a){},55:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){},81:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){},87:function(e,t,a){}},[[33,2,1]]]);
//# sourceMappingURL=main.ae14e919.chunk.js.map